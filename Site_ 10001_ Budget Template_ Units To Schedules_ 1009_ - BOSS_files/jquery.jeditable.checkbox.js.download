/**
 * Usage:
 *
 * 1. Install Jeditable: http://www.appelsiini.net/projects/jeditable
 * 2. Add the code below to your javascript.
 * 3. Call it like this:
 *
 * $('p').editable('/edit', {
 *   type:   'checkbox',
 *   cancel: 'Cancel',
 *   submit: 'OK',
 *   checkbox: { trueValue: 'Yes', falseValue: 'No' }
 * });
 *
 * Upon clicking on the <p>, it's content will be replaced by a checkbox.
 * If the text within the paragraph is 'Yes', the checkbox will be checked
 * by default, otherwise it will be unchecked.
 *
 * trueValue is submitted when the checkbox is checked and falseValue otherwise.
 *
 * Have fun!
 *
 * Peter BÃ¼cker (spam.naag@gmx.net)
 * http://www.pastie.org/893364
 */

$.editable.addInputType('checkbox', {
  element: function(settings, original) {
    var input = $('<input type="checkbox" class="chkbox"/>');
    var hidden = $('<input type="hidden"/>');
    $(this).append(input);
    return(input);
  },

  submit: function(settings, original) {
    settings = $.extend({ checkbox: {
      trueValue: 'Yes',
      falseValue: 'No'
    }}, settings);

    if ($(':checkbox', this).is(':checked')) {
      $(':checkbox', this).val('1');
    } else {
      $(':checkbox', this).val('0');
    }
  },

  content: function(data, settings, original) {
    settings = $.extend({ checkbox: {
      trueValue: 'Yes',
      falseValue: 'No'
    }}, settings);

    if (data == settings.checkbox.trueValue) {
      $(':checkbox', this).attr('checked', 'checked');
    } else {
      $(':checkbox', this).removeAttr('checked');
    }
  }
});

