/**
 * jquery.Notifications
 *
 * Updates the notifications menu item with the number of notifications.
 *
 * @author Robert Corley
 */
;(function( $ ){
    var methods = {

        /**
         * Constructor
         */
        init : function() {
            return $(this);
        },

        /**
         * Update
         */
        update : function() {

            $.get('/notifications/count' , function (number) {
                if (number > 0) {
                    $('.notifications').addClass('hasNotifications');
                } else {
                    $('.notifications').removeClass('hasNotifications');
                }
                $('.notifications').attr('data-content', number);
            });


            return $(this);
        }

    };

    /**
     * Setup method handler
     */
    $.fn.Notifications = function( method ) {
        if ( methods[method] ) {
            return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
        } else if ( typeof method === 'object' || ! method ) {
            return methods.init.apply( this, arguments );
        } else {
            $.error( 'Method ' +  method + ' does not exist on jQuery.Notifications' );
        }
    };
})( jQuery );